#!/usr/bin/env ruby

require 'json'
API_KEY = ''
CLIENT_KEY = ''
DEVICE_KEY = ''
DEVICE_ID = ''

data = Hash[*DATA.read.split(/\n+/)]

ARGV.each do |d|
	d = d.upcase
	code = data[d]
	if code.nil?
		$stderr.puts "unknown code: #{d}"
	else
		system('curl', '-i', 'http://iRKit499D.local/messages', '-H', 'X-Requested-With: curl', '-d', code)
		# system('curl', '-i', 'https://api.getirkit.com/1/messages', '-H', 'X-Requested-With: curl', '-d', "clientkey=#{CLIENT_KEY}", '-d', "deviceid=#{DEVICE_ID}", '-d', 'message=' + code)
	end
end

__END__
AIRCON_ON
{"format":"raw","freq":38,"data":[8755,8755,1111,3119,1111,3119,1111,3119,1111,3119,1111,1002,1111,1002,1111,3119,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,3119,1111,3119,1111,1002,1111,3119,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,3119,1111,3119,1111,3119,1111,3119,1111,3119,1111,3119,1111,3119,1111,3119,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,3119,1111,3119,1111,1002,1111,1002,1111,3119,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,3119,1111,3119,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,3119,1111,1002,1111,1002,1111,3119,1111,1002,1111,1002,1111,3119,1111,1002,1111,10398,8755,8755,1111,3119,1111,3119,1111,3119,1111,3119,1111,1002,1111,1002,1111,3119,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,3119,1111,3119,1111,1002,1111,3119,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,3119,1111,3119,1111,3119,1111,3119,1111,3119,1111,3119,1111,3119,1111,3119,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,3119,1111,3119,1111,1002,1111,1002,1111,3119,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,3119,1111,3119,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,1002,1111,3119,1111,1002,1111,1002,1111,3119,1111,1002,1111,1002,1111,3119,1111,1002,1111]}

AIRCON_OFF
{"format":"raw","freq":38,"data":[8755,8755,1073,3228,1073,3228,1073,3228,1073,3228,1073,1073,1073,1073,1073,3228,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,3228,1073,3228,1073,1073,1073,3228,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,3228,1073,3228,1073,3228,1073,3228,1073,3228,1073,3228,1073,3228,1073,3228,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,3228,1073,3228,1073,1073,1073,1073,1073,3228,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,3228,1073,3228,1073,3228,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,3228,1073,1073,1073,1073,1073,3228,1073,1073,1073,3228,1073,3228,1073,1073,1073,10398,8755,8755,1073,3228,1073,3228,1073,3228,1073,3228,1073,1073,1073,1073,1073,3228,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,3228,1073,3228,1073,1073,1073,3228,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,3228,1073,3228,1073,3228,1073,3228,1073,3228,1073,3228,1073,3228,1073,3228,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,3228,1073,3228,1073,1073,1073,1073,1073,3228,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,3228,1073,3228,1073,3228,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,1073,3228,1073,1073,1073,1073,1073,3228,1073,1073,1073,3228,1073,3228,1073,1073,1073]}

LIGHT_ALL
{"format":"raw","freq":38,"data":[16832,8459,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,3341,1150,1037,1150,3341,1150,3341,1150,3341,1150,1037,1150,3341,1150,3341,1150,1037,1150,3341,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,3341,1150,3341,1150,3341,1150,3341,1150,3341,1150,3341,1150,3341,1150,65535,0,18662,18662,10047,1275,3704,1275,3704,1275,3704,1275,1275,1275,1275,1275,3704,1275,3704,1275,3704,1275,1275,1275,1275,1275,3704,1275,3704,1275,1275,1275,1275,1275,1275,1275,1275,1275,3704,1275,3704,1275,3704,1275,1275,1275,3704,1275,1275,1275,1275,1275,3704,1275,1275,1275,1275,1275,1275,1275,3704,1275,1275,1275,3704,1275,3704,1275,1275,1275,65535,0,28200,6648,3228,843,2451,843,761,843,761,843,761,843,761,843,761,843,761,843,761,843,761,843,761,843,761,843,761,843,2451,843,761,843,761,843,761,843,761,843,761,843,761,843,761,843,2451,843,2451,843,761,843,761,843,761,843,761,843,761,843,761,843,2451,843,761,843,2451,843,761,843,2451,843,2451,843,2451,843,2451,843,761,843,2451,843,761,843,2451,843,761,843,761,843,761,843,761,843,761,843,761,843,761,843,761,843,2451,843,2451,843,2451,843,2451,843,2451,843,2451,843,2451,843,2451,843,761,843,2451,843,843,843,761,843,761,843,761,843,761,843,761,843,2451,843,761,843,2451,843,2451,843,2451,843,2451,843,2451,843,2451,843,761,843,2451,843,761,843,761,843,761,843,761,843,2451,843,2451,843,2451,843,761,843,2451,843,2451,843,2451,843,2451,843,761,843,761,843,65535,0,7122,7122,3458,904,815,904,815,904,2537,904,2537,904,815,904,2537,904,815,904,815,904,815,904,2537,904,815,904,815,904,2537,904,815,904,2537,904,815,904,2537,904,815,904,815,904,2537,904,815,904,815,904,815,904,815,904,815,904,815,904,2537,904,2537,904,815,904,2537,904,815,904,815,904,2537,904,815,904,2537,904,815,904,815,904,2537,904,815,904,815,904]}

LIGHT_OFF
{"format":"raw","freq":38,"data":[16832,8459,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,3341,1150,1037,1150,3341,1150,3341,1150,3341,1150,1037,1150,3341,1150,3341,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,3341,1150,3341,1150,3341,1150,3341,1150,3341,1150,3341,1150,3341,1150,3341,1150,65535,0,18662,16832,65535,0,42612,16832,8459,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,3341,1150,1037,1150,3341,1150,3341,1150,3341,1150,1037,1150,3341,1150,3341,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,3341,1150,3341,1150,3341,1150,3341,1150,3341,1150,3341,1150,3341,1150,3341,1150,65535,0,18662,18662,10047,1232,3704,1232,3704,1232,3704,1232,1232,1232,1232,1232,3704,1232,3704,1232,3704,1232,1232,1232,1232,1232,3704,1232,3704,1232,1232,1232,1232,1232,1232,1232,1232,1232,3704,1232,3704,1232,1232,1232,3704,1232,1232,1232,1232,1232,1232,1232,3704,1232,1232,1232,1232,1232,3704,1232,1232,1232,3704,1232,3704,1232,3704,1232,1232,1366,65535,0,28200,6648,3228,843,2451,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,2451,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,2451,843,2451,843,843,843,843,843,843,843,843,843,843,843,843,843,2451,843,843,843,2451,843,843,843,2451,843,2451,843,2451,843,2451,843,843,843,2451,843,843,843,2451,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,2451,843,2451,843,2451,843,2451,843,2451,843,2451,843,2451,843,2451,843,2451,843,2451,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,2451,843,2451,843,2451,843,2451,843,2451,843,2451,843,843,843,2451,843,843,843,843,843,843,843,843,843,2451,843,2451,843,2451,843,843,843,2451,843,2451,843,2451,843,2451,843,843,843,843,843,65535,0,7122,7122,3458,873,873,873,873,873,2537,873,2537,873,873,873,2537,873,873,873,873,873,873,873,2537,873,873,873,873,873,2537,873,873,873,2537,873,873,873,2537,873,873,873,873,873,2537,873,873,873,873,873,873,873,873,873,2537,873,2537,873,2537,873,2537,873,873,873,2537,873,873,873,873,873,873,873,2537,873,2537,873,873,873,873,873,2537,873,873,873,873,873]}

LIGHT_DINING_ALL
{"format":"raw","freq":38,"data":[16832,8459,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,3341,1150,1037,1150,3341,1150,3341,1150,3341,1150,1037,1150,3341,1150,3341,1150,1037,1150,3341,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,3341,1150,1037,1150,3341,1150,3341,1150,3341,1150,3341,1150,3341,1150,3341,1150,1037,1150,65535,0,18662,18662,10047,1232,3704,1232,3704,1232,3704,1232,1232,1232,1232,1232,3704,1232,3704,1232,3704,1232,1232,1232,1232,1232,3704,1232,3704,1232,1232,1232,1232,1232,1232,1232,1232,1232,3704,1232,3704,1232,3704,1232,1232,1232,3704,1232,1232,1232,1232,1232,1232,1232,1232,1232,1232,1232,1232,1232,3704,1232,1232,1232,3704,1232,3704,1232,3704,1366,65535,0,28200,6648,3228,843,2451,843,843,843,761,843,761,843,761,843,761,843,761,843,761,843,761,843,761,843,761,843,761,843,2451,843,761,843,761,843,761,843,761,843,761,843,761,843,761,843,2451,843,2451,843,843,843,843,843,761,843,761,843,761,843,761,843,2451,843,761,843,2451,843,761,843,2451,843,2451,843,2451,843,2451,843,843,843,2451,843,761,843,2451,843,761,843,761,843,761,843,761,843,761,843,761,843,761,843,761,843,2451,843,2451,843,2451,843,2451,843,2451,843,2451,843,2451,843,2451,843,761,843,2451,843,761,843,761,843,761,843,761,843,761,843,761,843,2451,843,761,843,2451,843,2451,843,2451,843,2451,843,2451,843,2451,843,2451,843,2451,843,761,843,761,843,761,843,761,843,2451,843,2451,843,761,843,761,843,2451,843,2451,843,2451,843,2451,843,761,843,761,843,65535,0,7122,7122,3458,873,873,873,873,873,2537,873,2537,873,873,873,2537,873,873,873,873,873,873,873,2537,873,873,873,873,873,2537,873,873,873,2537,873,873,873,2537,873,873,873,873,873,2537,873,873,873,873,873,873,873,873,873,873,873,873,873,2537,873,873,873,2537,873,2537,873,873,873,873,873,2537,873,873,873,2537,873,2537,873,2537,873,2537,873,873,873,873,873]}

LIGHT_DINING_OFF
{"format":"raw","freq":38,"data":[16832,8459,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,3341,1150,1037,1150,3341,1150,3341,1150,3341,1150,1037,1150,3341,1150,3341,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,1037,1150,3341,1150,3341,1150,3341,1150,3341,1150,3341,1150,3341,1150,3341,1150,3341,1150,1037,1150,65535,0,18662,18662,10047,1232,3704,1232,3704,1232,3704,1232,1232,1232,1232,1232,3704,1232,3704,1232,3704,1232,1232,1232,1232,1232,3704,1232,3704,1232,1232,1232,1232,1232,1232,1232,1232,1232,3704,1232,3704,1232,1232,1232,3704,1232,1232,1232,1232,1232,1232,1232,1232,1232,1232,1232,1232,1232,3704,1232,1232,1232,3704,1232,3704,1232,3704,1232,3704,1366,65535,0,28200,6648,3228,843,2451,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,2451,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,2451,843,2451,843,843,843,843,843,843,843,843,843,843,843,843,843,2451,843,843,843,2451,843,843,843,2451,843,2451,843,2451,843,2451,843,843,843,2451,843,843,843,2451,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,843,2451,843,2451,843,2451,843,2451,843,2451,843,2451,843,2451,843,2451,843,2451,843,2451,843,843,843,843,843,761,843,761,843,761,843,761,843,761,843,761,843,2451,843,2451,843,2451,843,2451,843,2451,843,2451,843,2451,843,2451,843,843,843,843,843,843,843,761,843,2451,843,2451,843,761,843,761,843,2451,843,2451,843,2451,843,2451,843,761,843,761,843,65535,0,7122,7122,3458,904,815,904,815,904,2537,904,2537,904,815,815,2537,904,815,904,815,904,815,904,2537,904,815,815,815,815,2537,904,815,904,2537,904,815,815,2537,904,815,904,815,904,2537,904,815,815,815,815,815,815,815,815,2537,904,2537,904,2537,904,815,815,2537,904,2537,904,815,815,815,815,815,815,2537,904,2537,904,2537,904,2537,904,2537,904,815,815,815,815]}

